<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Bug Tracker - Main</title>

    <link rel="stylesheet" href="./styles/form.css" />
    <link rel="stylesheet" href="./styles/sidebar.css" />
    <link rel="stylesheet" href="./styles/main_interface.css" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  </head>
  <body>
    <div class="app-layout">
      <aside class="sidebar" aria-label="Primary navigation">
        <div class="nav-top">BugTracker</div>

        <nav class="nav-links" aria-label="Sidebar links">
          <a class="nav-link active" href="#" id="nav-dashboard">Dashboard</a>
          <a class="nav-link" href="#" id ="nav-projects">Projects</a>
          <a class="nav-link" href="#" id="nav-teams">Teams</a>
          <a class="nav-link" href="#" id="nav-settings">Settings</a>
        </nav>

        <div class="user-section">
          <div class="user-info-group">
            <small style="display:block; opacity: 0.5; font-size: 0.75rem; margin-bottom: 4px;">Logged in as:</small>
            <span id="currentUserDisplay"style="font-weight: 500; font-size: 0.95rem; display: block; margin-bottom: 12px;">Loading...</span>
        </div>

        <button id="logoutBtn" class="sidebar-logout-btn">
                <i class='bx bx-log-out'></i> Logout
            </button>
        </div>
      </aside>

      <div class="main-area">
        <header class="topbar" role="banner">
          <div class="top-left"></div>

          <div class="top-center">
            <select
              id="teamDropdown"
              class="team-dropdown"
              aria-label="Select team"
            >
              <option value="">Loading teams...</option>
            </select>
          </div>

          <div class="top-right">
            <button id="createBugBtn" style="background-color: #2ecc71;">New Bug</button>
            <button id="refreshBtn" class="btn-icon" title="Refresh">
                <i class='bx bx-refresh'></i>
            </button>
          </div>
        </header>
<main class="content-area">
          <table class="bugs-table">
            <thead>
              <tr>
                <th>Title</th>
                <th>Commit</th>
                <th>Status</th>
                <th>Priority</th> <th>Team</th>
                <th style="text-align: right;">Actions</th> </tr>
            </thead>
            <tbody id="bugsTableBody">
              <tr>
                  <td colspan="6" style="text-align: center; color: var(--text-color);">Loading bugs...</td>
              </tr>
            </tbody>
          </table>

            <div class="pagination" id="paginationWrap" aria-label="Pagination">
            <button id="prevBtn" class="btn" disabled>&lt; Prev</button>
            <span id="pageInfo" class="page-info">Page 1</span>
            <button id="nextBtn" class="btn" disabled>Next &gt;</button>
          </div>
        </main>
      </div>
    </div>
<div id="bugModal" class="modal-overlay">
  <div class="modal-window">
    <h2 id="modalTitle" style="text-align: center; margin-bottom: 30px; color: #fff;">New Bug</h2>
    
    <form id="bugForm">
      <input type="hidden" id="bugIdField">

      <div class="text-input">
        <label for="bugTitle">Title</label>
        <input type="text" id="bugTitle" required placeholder="Short summary" maxlength="255">
      </div>

      <div class="text-input">
        <label for="bugTeam">Team</label>
        <select id="bugTeam" required></select>
      </div>

      <div class="text-input">
        <label for="bugPriority">Priority</label>
        <select id="bugPriority">
          <option value="LOW">Low</option>
          <option value="MEDIUM" selected>Medium</option>
          <option value="HIGH">High</option>
          <option value="CRITICAL">Critical</option>
        </select>
      </div>

      <div class="text-input">
        <label for="bugDescription">Description</label>
        <textarea id="bugDescription" placeholder="What happened?"></textarea>
      </div>

      <div class="text-input">
        <label for="bugSteps">Steps to reproduce</label>
        <textarea id="bugSteps" placeholder="1. Go to... 2. Click..."></textarea>
      </div>

      <div class="text-input">
        <label for="bugCommit">Commit Hash (Optional)</label>
        <input type="text" id="bugCommit" placeholder="e.g. 8f2a1b9" maxlength="100">
      </div>
      
      <div class="text-input">
        <label for="bugCommitUrl">Commit URL (Optional)</label>
        <input type="url" id="bugCommitUrl" placeholder="https://github.com/..." style="width: 100%;">
      </div>
      
      <div class="checkbox" style="margin-top: 5px;">
        <input type="checkbox" id="bugResolved">
        <label for="bugResolved" style="color: var(--text-color);">Mark as Resolved</label>
      </div>

      <div style="display: flex; flex-direction: column; gap: 15px; margin-top: 25px;">
        <button type="submit" class="btn">Save Bug</button>
        <button type="button" id="cancelModalBtn" class="btn" style="background: transparent; border: 1px solid rgba(255,255,255,0.3);">Cancel</button>
      </div>
    </form>
  </div>
</div>

<div id="detailsModal" class="modal-overlay">
  <div class="modal-window details-window">
    
    <div class="details-header">
      <div class="details-title-group">
        <span id="detDisplayId" class="details-id">#ID</span>
        <h2 id="detDisplayTitle">Bug Title Placeholder</h2>
      </div>
      <div id="detDisplayStatus" class="status-badge status-open">OPEN</div>
    </div>

    <div class="details-body">
      
      <div>
        <div class="detail-section">
          <div class="detail-label">Description</div>
          <div id="detDisplayDesc" class="detail-content-box">No description.</div>
        </div>

        <div class="detail-section">
          <div class="detail-label">Steps to Reproduce</div>
          <div id="detDisplaySteps" class="detail-content-box">No steps provided.</div>
        </div>
      </div>

      <div>
        <div class="detail-label">Meta Info</div>
        <div class="meta-panel">
          <div class="meta-row">
            <i class='bx bx-user'></i>
            <div>
              <small style="display:block; opacity:0.5;">Creator</small>
              <span id="detDisplayCreator">User</span>
            </div>
          </div>
          
          <div class="meta-row">
            <i class='bx bx-group'></i>
            <div>
              <small style="display:block; opacity:0.5;">Team</small>
              <span id="detDisplayTeam">Team Name</span>
            </div>
          </div>

          <div class="meta-row">
            <i class='bx bx-tachometer'></i>
            <div>
              <small style="display:block; opacity:0.5;">Priority</small>
              <span id="detDisplayPriority">MEDIUM</span>
            </div>
          </div>
          
           <div class="meta-row">
            <i class='bx bx-calendar'></i>
            <div>
              <small style="display:block; opacity:0.5;">Discovered</small>
              <span id="detDisplayDate">Date</span>
            </div>
          </div>
        </div>
        <div class="detail-section" style="margin-top: 25px;">
          <div class="detail-label">Commit Info</div>
          <div class="meta-panel" style="padding: 15px;">
            <div style="margin-bottom: 10px;">
                <span style="opacity:0.5;">Hash: </span>
                <span id="detDisplayCommit" class="commit-hash">-</span>
            </div>
            <div>
                <span style="opacity:0.5;">URL: </span>
                <a id="detDisplayUrl" href="#" target="_blank" class="commit-link">No link</a>
            </div>
          </div>
        </div>

      </div>
    </div>
    <div class="details-footer">
      <button id="closeDetailsBtn" class="btn btn-secondary" style="border: 1px solid rgba(255,255,255,0.2); background: transparent;">Close</button>
      <button id="editFromDetailsBtn" class="btn">Edit Bug</button>
    </div>
  </div>
</div>
    <script src="./scripts/main_interface.js" defer></script>
  </body>
</html>